<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SignUp Process1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../css/signup_flow.css"/>

</head>
<body>
    <header>
        <div class="mb-5 d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
                <a href="index.html">
                    <img src="../images/logo.png" alt="Logo" style="width: 190px; height: 80px;">
                </a>
            </div>
            <div class="d-flex align-items-center">
                <button class="btn header-btn notificationIcon me-3">
                    <i class="fas fa-bell"></i>
                </button>
                <button class="btn header-btn profileIcon">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </div>
    </header>

    <main>
      <div class="col-md-12 col-11">
        <div class="row gx-4 px-4">
            <h3 class="fw-bold">Sign Up Process</h3>
            <div class="col-md-2 bg-white">
                <div class="mx-1 my-3 progress-container">
                    <div class="steps">
                        <!-- Step 1 -->
                        <div class="step">
                          <div class="step-title">
                            <div class="step-number">1</div>
                            <span class="step-name">Registration</span>
                            <span class="dropdown-icon">&#9660;</span>
                          </div>
                          <ul class="substeps">
                            <li data-substep-id="company-info"><span class="check-icon"></span>Company Information</li>
                            <li data-substep-id="gst-info"><span class="check-icon"></span>GST Information</li>
                            <li data-substep-id="business-nature"><span class="check-icon"></span>Business Natures</li>
                            <li data-substep-id="update-catalog"><span class="check-icon"></span>Update Catalog</li>
                          </ul>
                        </div>
                      
                        <!-- Step 2 -->
                        <div class="step">
                          <div class="step-title">
                            <div class="step-number">2</div>
                            <span class="step-name">Personal Info</span>
                            <span class="dropdown-icon">&#9660;</span>
                          </div>
                          <ul class="substeps">
                            <li data-substep-id="personal-details"><span class="check-icon"></span>Personal Details</li>
                          </ul>
                        </div>
                      
                        <!-- Step 3 -->
                        <div class="step">
                          <div class="step-title">
                            <div class="step-number">3</div>
                            <span class="step-name">Wallet Integration</span>
                            <span class="dropdown-icon">&#9660;</span>
                          </div>
                          <ul class="substeps">
                            <li data-substep-id="wallet-connection"><span class="check-icon"></span>Wallet Connection</li>
                          </ul>
                        </div>
                      </div>
                  </div>
            </div>
            <div class="col-md-10">
                <div class="jumbotron step-bar d-flex justify-content-between">
                    <h3 class="step-bar-title">01. SUPPLIER REGISTRATION</h3>
                </div>
                <form>
                    <!-- each substep's container -->
                    <div class="substep-container">
                        <h6 class="substep-title">Company Information</h6>
                        <div class="substep-container-content row">
                            <div class="mb-2 signup-form-row">
                                <label for="ssm_no" class="form-label signup-form-label">SSM Registration No.:</label>
                                <div class="form-input">
                                    <input type="text" id="ssm_no" class="form-control sigup-form-input" data-substep="company-info" >
                                </div>
                                <label for="owner" class="form-label signup-form-label">Owner Name:</label>
                                <div class="form-input">
                                    <input type="text" id="owner" class="form-control sigup-form-input" data-substep="company-info" >
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="businessType" class="form-label signup-form-label">Business Type:</label>
                                <div class="form-input">
                                    <select id="businessType" class="form-control sigup-form-input" data-substep="company-info">
                                        <option value="" disabled selected>--- select business type ---</option>
                                        <option value="sole_proprietorship">Sole Proprietorship</option>
                                        <option value="patnership">Patnership</option>
                                        <option value="sdn_bhd">Sdn Bhd</option>
                                    </select>
                                </div>
                                <label for="ownerIC" class="form-label signup-form-label">Owner IC No.:</label>
                                <div class="form-input">
                                    <input type="text" id="ownerIC" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="companyName" class="form-label signup-form-label">Company Name:</label>
                                <div class="form-input">
                                    <input type="text" id="companyName" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="nationality" class="form-label signup-form-label">Nationality:</label>
                                <div class="form-input">
                                    <input type="text" id="nationality" class="form-control sigup-form-input" value="Malaysian" readonly data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-2 signup-form-row">
                                <label for="companyAddr" class="form-label signup-form-label">Company Address:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="companyAddr_country" class="form-label signup-form-label">Country:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr_country" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="companyAddr_state" class="form-label signup-form-label">State:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr_state" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="companyAddr_district" class="form-label signup-form-label">District:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr_district" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="companyAddr_city" class="form-label signup-form-label">City:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr_city" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="companyAddr_poscode" class="form-label signup-form-label">Poscode:</label>
                                <div class="form-input">
                                    <input type="text" id="companyAddr_poscode" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="incomeTax" class="form-label signup-form-label">Income Tax No.:</label>
                                <div class="form-input">
                                    <input type="text" id="incomeTax" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-2 signup-form-row">
                                <label for="establ_date" class="form-label signup-form-label">Establishment Date: </label>
                                <div class="form-input">
                                    <input type="date" id="establ_date" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="ssm_cert" class="form-label signup-form-label">SSM Registration Certificate:</label>
                                <div class="form-input">
                                    <input type="file" id="ssm_cert" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                            <div class="mb-3 signup-form-row">
                                <label for="company_tel_num" class="form-label signup-form-label">Tel No.: </label>
                                <div class="form-input">
                                    <input type="text" id="company_tel_num" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                                <label for="fax_num" class="form-label signup-form-label">Fax No.:</label>
                                <div class="form-input">
                                    <input type="text" id="fax_num" class="form-control sigup-form-input" data-substep="company-info">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- gst info -->
                    <div class="mb-4 substep-container">
                        <h6 class="substep-title">GST Information</h6>
                        <div class="substep-container-content row">
                            <div class="mb-2 signup-form-row">
                                <label for="gst_no" class="form-label signup-form-label">GST Registration No.:</label>
                                <div class="form-input">
                                    <input type="text" id="gst_no" class="form-control sigup-form-input" data-substep="gst-info">
                                </div>
                                <label for="gst_eff_date" class="form-label signup-form-label">GST Registration Effective Date:</label>
                                <div class="form-input">
                                    <input type="date" id="gst_eff_date" class="form-control sigup-form-input" data-substep="gst-info">
                                </div>
                            </div>
                            <div class="mb-2 signup-form-row">
                                <label for="gst_end_date" class="form-label signup-form-label">GST Registration No.:</label>
                                <div class="form-input">
                                    <input type="date" id="gst_end_date" class="form-control sigup-form-input" data-substep="gst-info">
                                </div>
                                <label for="gst_doc" class="form-label signup-form-label">Upload GST Doc:</label>
                                <div class="form-input">
                                    <input type="file" id="gst_doc" class="form-control sigup-form-input" data-substep="gst-info">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- business natures -->
                    <div class="mb-4 substep-container">
                        <h6 class="substep-title">Business Natures</h6>
                        <div class="substep-container-content row">
                            <table class="mb-2 business-nature-table">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Business Natures</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="business-nature-row">
                                        <td><input type="text" class="business-nature-code" data-substep="business-nature"></td>
                                        <td><input type="text" class="business-nature-name" data-substep="business-nature"></td>
                                        <td><i class="fa fa-remove remove-row"></i></td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="3"><button type="button" id="add-business-nature-row"><i class="fa fa-plus" aria-hidden="true"></i></button></td>
                                    </tr>
                                </tfoot>
                            </table>
                            <span>Click <span style="color: #4550DA;">here</span> to download full list of Business Type</span>
                        </div>
                    </div>
                    <!-- update catalog -->
                    <div class="mb-4 substep-container">
                        <h6 class="substep-title">Update Catalog</h6>
                        <div class="substep-container-content row">
                            <table class="mb-2 update-catalog-table">
                                <thead>
                                    <tr>
                                        <th>Item Code</th>
                                        <th>Item Name</th>
                                        <th>Details</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="update-catalog-row">
                                        <td><input type="text" class="item-code" data-substep="update-catalog"></td>
                                        <td><input type="text" class="item-name" data-substep="update-catalog"></td>
                                        <td><input type="text" class="item-details" data-substep="update-catalog"></td>
                                        <td><i class="fa fa-remove remove-row"></i></td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4"><button type="button" id="add-update-catalog-row" style="align-items: flex-end;"><i class="fa fa-plus" aria-hidden="true"></i></button></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div class="btn-container">
                        <div class="d-flex justify-content-center align-items-center">
                            <a href="signUp_flow2.html">
                                <button type="button" id="next-btn" class="btn ms-3">
                                    NEXT <i class="fa-solid fa-caret-right ms-2"></i>
                                </button>
                            </a>

                        </div>
                    </div>
                </form>
                <script>
                    document.addEventListener("DOMContentLoaded", () => {
                        const user = {
                            ssmNumber: "SSM-123456",
                            ssmCertificate: "SSM_CERTIFICATE_HASH",
                            companyName: "Tech Solutions Sdn Bhd",
                            expertFields: ["IT", "Consulting"],
                            ownerName: "John Doe",
                            personalDetails: {
                                fullName: "Johnathan Doe",
                                email: "johndoe1@gmail.com",
                                phone: "016-5478854",
                            },
                        };

                        // Autofill form fields
                        document.getElementById("ssm_no").value = user.ssmNumber || "";
                        document.getElementById("owner").value = user.ownerName || "";
                        document.getElementById("companyName").value = user.companyName || "";
                        // document.getElementById("").value = user.personalDetails.email || "";
                        // document.getElementById("tel_num").value = user.personalDetails.phone || "";
                    });
                </script>
                <script>
                    document.addEventListener("DOMContentLoaded", () => {
                        const nextBtn = document.getElementById("next-btn");
                        if (nextBtn) { // Check if the button exists n
                            nextBtn.addEventListener("click", () => {
                                // Collect all business nature names dynamically
                                const expertFields = [];
                                document.querySelectorAll(".business-nature-name").forEach((input) => {
                                    if (input.value.trim() !== "") { // Check if input is not empty
                                        expertFields.push(input.value.trim());
                                    }
                                });
                                // Collect form data
                                const user = {
                                    ssmNumber: document.getElementById("ssm_no")?.value || "",
                                    ssmCertificate: "SSM_CERTIFICATE_HASH",
                                    companyName: document.getElementById("companyName")?.value || "",
                                    expertFields: expertFields,
                                    ownerName: document.getElementById("owner")?.value || "",
                                    personalDetails: {
                                        fullName: "",
                                        email: "",
                                        phone: "",
                                    },
                                    isRegistered: false, // Default state before submission
                                };

                                console.log("Data collected---");
                                console.log("Collected Expert Fields:", expertFields);

                                // Save data to localStorage
                                localStorage.setItem("userData", JSON.stringify(user));

                                console.log(JSON.stringify(user));

                                // Navigate to the next page
                                window.location.href = "signUp_flow2.html";
                            });
                        } else {
                            console.error("Next button with id 'next-btn' not found.");
                        }
                    });
                </script>
            </div>
        </div>
      </div>
    </main>
    
</body>
</html>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../javascript/signup_flow.js"></script>
